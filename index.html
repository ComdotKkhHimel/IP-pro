<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IP Monitor Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>IP Monitor Dashboard</h1>
        <div id="info">
            <p><strong>Local IP:</strong> <span id="local-ip">Loading...</span></p>
            <p><strong>Public IP:</strong> <span id="public-ip">Loading...</span></p>
            <p><strong>Last Checked:</strong> <span id="timestamp">Loading...</span></p>
        </div>
        <h2>Recent IP Changes</h2>
        <pre id="log">Loading...</pre>
    </div>

    <script>
        async function fetchIPs() {
            const res = await fetch("/api/ip");
            const data = await res.json();
            document.getElementById("local-ip").textContent = data.local_ip;
            document.getElementById("public-ip").textContent = data.public_ip;
            document.getElementById("timestamp").textContent = data.time;
        }

        async function fetchLogs() {
            const res = await fetch("/api/log");
            const data = await res.json();
            document.getElementById("log").textContent = data.logs.join('');
        }

        async function updateDashboard() {
            await fetchIPs();
            await fetchLogs();
        }

        updateDashboard();
        setInterval(updateDashboard, 10000);
    </script>
</body>
</html>